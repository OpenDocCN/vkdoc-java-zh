# 27.对设计模式的批评

在这一章中，我提出了一些对设计模式的批评。阅读批评能提供真正的价值。如果你在设计软件之前批判性地思考模式，你可以在某种程度上预测你的“投资回报”。设计模式基本上帮助你从他人的经验中获益。这就是通常所说的*经验复用*。你学习他们如何解决挑战，他们如何试图在他们的系统中适应新的行为，等等。一个模式可能并不完全适合你的工作，但是如果你在开始的时候专注于最佳实践以及模式的问题，你就更有可能做出更好的应用。

以下是对模式的一些批评。

*   Christopher Alexander 考虑了多年来变化不大的领域(与软件行业相比)。相反，软件行业总是在变化，软件开发的变化比任何其他领域都要快。所以，你不能从克里斯托弗·亚历山大考虑的领域(建筑和城镇)出发。

*   在今天的世界里，你写程序的方式是不同的，你现在拥有的设备比过去的编程时代要多得多。因此，当您基于一些旧的实践提取模式时，您基本上对它们表现出了额外的尊重。

*   许多模式彼此接近。每种模式都有利弊(我在每章末尾的“问答环节”中讨论过它们。)一种情况下的缺陷在另一种情况下可能是真正的优点。

*   今天给你带来满意结果的模式，在不久的将来会成为你的一个大负担，因为软件行业的“持续变化”。

*   用有限数量的设计模式很难设计出无限数量的需求。

*   设计一个软件基本上是一门艺术。没有最好的艺术的定义或标准。

*   设计模式给你的是想法，而不是实现(比如库或框架)。每个人的思想都是独特的。因此，每个工程师可能都有自己的偏好来实现类似的概念，这可能会在团队中造成混乱。

*   考虑一个简单的例子。模式鼓励人们编写超类型(抽象类/接口)的代码。但是对于一个简单的应用程序，您知道没有即将到来的变化，或者应用程序只是为了演示的目的而创建的，这个规则可能没有多大意义。

*   同样，在一些小型应用程序中，您可能会发现强制执行设计模式的规则会增加您的代码大小和维护成本。

*   抹去旧的适应新的并不总是容易的。例如，当你第一次了解到遗传时，你很兴奋。你可能想以多种方式使用它，并且只看到这个概念的好处。但是后来当你开始尝试设计模式时，你开始了解到在许多情况下，组合比继承更受青睐。这种换挡并不容易。

*   设计模式基于一些关键原则，其中之一是*识别可能变化的代码，然后将其从代码的其余部分中分离出来*。从理论角度听起来很不错。但是在现实世界中，谁能保证你的判断是完美的呢？软件行业总是在变化，它需要适应新的需求。

*   许多模式已经与现代语言集成在一起。您可以使用语言构造中的内置支持，而不是从头开始实现模式。例如，您可能会注意到，在某些上下文中，每个模式都有 JDK 实现。

*   不恰当地使用模式会导致反模式(例如，不恰当地使用中介模式会导致“上帝级”反模式)。我在第 28 章中给出了反模式的简要概述。

*   许多人认为设计模式的概念只是表明一种编程语言可能需要额外的特性。因此，随着现代编程语言能力的增强，模式变得不那么重要了。维基百科说，计算机科学家 Peter Norvig 认为，通过 Lisp 或 Dylan 的直接语言支持，GoF 设计模式中的 23 种模式中有 16 种被简化或消除。在 [`https://en.wikipedia.org/wiki/Software_design_pattern`](https://en.wikipedia.org/wiki/Software_design_pattern) 可以看到一些类似的想法。

*   最后，设计模式基本上帮助你从别人的经验中获益。你正在了解他们的想法，你开始知道他们是如何遇到挑战的，他们是如何试图在他们的系统中适应新的行为，等等。但是你首先假设一个初学者或相对缺乏经验的人不能比他/她的前辈更好地解决问题。在一些特定的场合，一个相对来说经验不足的人可以比他的前辈有更好的眼光，他可以在未来更有效的证明自己。

## 问答环节

1.  有这些模式的目录吗？

    我从 GoF 的 23 种设计模式开始，然后在本书中讨论了另外三种模式。GoF 的目录被认为是最基本的模式目录。

    但是肯定有许多其他目录专注于特定的领域。

    波特兰模式库和希尔赛德集团的网站在这方面是众所周知的。你可以在[`http://wiki.c2.com/?WelcomeVisitors`](http://wiki.c2.com/%253FWelcomeVisitors)[`https://hillside.net/patterns/patterns-catalog`](https://hillside.net/patterns/patterns-catalog)*从这些资源中获得宝贵的见解和思想。*

    希尔赛德集团的网站还提到了它的各种会议和研讨会。

### 注意

在撰写本文时，书中的 URL 运行良好，但其中一些链接和访问这些链接的策略可能会在未来发生变化。

1.  **你为什么不涵盖其他模式？**

    These are my personal beliefs:
    *   计算机科学不断发展，你不断得到新的模式。

    *   如果您不熟悉基本模式，您就不能评估剩余的或即将到来的模式的真正需求。比如，如果你很了解 MVC，你就能看出它和模型-视图-展示者(MVP)有什么不同，明白为什么需要 MVP。

    *   这本书已经很厚了。对每个模式的详细讨论需要更多的页面，这将使这本书太大而难以消化。

因此，在这本书里，我把重点放在在今天的编程世界中仍然相关的基本模式上。

1.  我经常在描述设计模式时看到“力”这个词。这是什么意思？

    这是开发人员证明其开发合理性的标准。概括地说，你的目标和当前的约束是你的力量的两个重要部分。因此，当您开发您的应用程序时，您可以用这些部分来证明您的开发。

2.  在各种论坛上，我看到人们为模式的定义争论不休，并且说“模式是在一个环境中对一个问题的一个被证实的解决方案。”这是什么意思？

    这是一个简单易记的模式定义。但是简单地把它分成三个部分(问题、背景和解决方案)是不够的。

    举个例子，假设你要去机场，你很匆忙。突然，你发现你把登机牌落在家里了。我们来分析一下情况:

    ***问题*** :你需要准时到达机场。

    ***语境*** :把登机牌落在家里了。

    ***可能想到的解决办法*** :折返，高速，冲回家拿登机牌。

    这个解决方案可能只工作一次，但是你能重复地应用同样的程序吗？你知道答案。这不是一个明智的解决方案，因为它取决于你有多少时间从家里领取通行证并返回机场。还要看目前路上的交通等很多因素。所以，即使你能获得一次成功，你也要为将来类似的情况准备一个更好的解决方案。

    所以，试着理解意思、意图、上下文等等，以便清楚地理解一个模式。

3.  有时我会对两种不同模式的相似 UML 图感到困惑。此外，在许多情况下，我还对模式的分类感到困惑。我该如何克服这一点？

    这是非常自然的。您越是阅读和分析这些实现，越是试图理解设计背后的意图，它们之间的区别就会越清晰。

4.  什么时候我应该考虑写一个新的模式？

    写一个新的模式并不容易。在投入精力之前，您需要大量研究并评估可用的模式。但是如果您找不到任何现有的模式来满足您特定领域的需求，您可能需要编写自己的模式。如果您的解决方案通过了“三原则”(基本上是说，要获得标签“模式”，一个解决方案需要在现实世界的解决方案中成功应用至少三次)，那就非常好了。一旦你做到了这一点，你就可以让其他人知道它，参与讨论论坛，并从其他人那里得到反馈。这项活动对您和开发社区都有帮助。